<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Usage</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/Gawdl3y/discord-graf.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="overview">
    <h1 class="manual-toc-title"><a href="manual/overview.html" data-ice="title">Overview</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/overview.html#information" data-ice="link">Information</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/overview.html#features" data-ice="link">Features</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/overview.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/overview.html#information" data-ice="link">Information</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/overview.html#modules" data-ice="link">Modules</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/overview.html#moderator-roles" data-ice="link">Moderator roles</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/overview.html#channels" data-ice="link">Channels</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/overview.html#utility" data-ice="link">Utility</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="installation">
    <h1 class="manual-toc-title"><a href="manual/installation.html" data-ice="title">Installation</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/installation.html#requirements" data-ice="link">Requirements</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/installation.html#installation" data-ice="link">Installation</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="usage">
    <h1 class="manual-toc-title"><a href="manual/usage.html" data-ice="title">Usage</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#information" data-ice="link">Information</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#first-steps" data-ice="link">First steps</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#commands" data-ice="link">Commands</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#classes" data-ice="link">Classes</a></li>
<li data-ice="manualNav" class="indent-h2"><span class="manual-dot"></span><a href="manual/usage.html#builder" data-ice="link">Builder</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#permissions" data-ice="link">Permissions</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#guild-storage" data-ice="link">Guild storage</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/usage.html#utilities" data-ice="link">Utilities</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="configuration">
    <h1 class="manual-toc-title"><a href="manual/configuration.html" data-ice="title">Configuration</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/configuration.html#information" data-ice="link">Information</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/configuration.html#constructor" data-ice="link">Constructor</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="manual/configuration.html#yargs" data-ice="link">Yargs</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <h1 class="manual-toc-title"><a href="identifiers.html" data-ice="title">Reference</a></h1>
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#class" data-ice="link">Class</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#variable" data-ice="link">Variable</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#typedef" data-ice="link">Typedef</a></li>
<li data-ice="manualNav" class="indent-h1"><span class="manual-dot"></span><a href="identifiers.html#external" data-ice="link">External</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Usage</span>
  </div>
  <div data-ice="content"><h2 id="information">Information</h2>
<p>The framework is built on top of the <a href="http://hydrabolt.github.io/discord.js/index.html#!/docs">discord.js rewrite</a>.
A Discord server is always referred to as a <code>Guild</code> internally, as that&apos;s what the API calls them.</p>
<h2 id="first-steps">First steps</h2>
<p>The first thing you&apos;ll want to do is instantiate the <a href="./manual/../class/src/bot/index.js~Bot.html"><code>Bot</code></a> class, specifying at minimum the properties <code>name</code> and <code>version</code>.
To add information to the built-in about command, also add the <code>about</code> property.
For update checking, specify <code>updateURL</code>.<br>Example:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const graf = require(&apos;discord-graf&apos;);

const version = &apos;1.0.0&apos;;
const bot = new graf.Bot({
    name: &apos;SomeBot&apos;,
    version: version,
    about: `**SomeBot** v${version} created by Some Guy.`,
    updateURL: &apos;https://raw.githubusercontent.com/SomeGuy/some-bot/master/package.json&apos;
});</code>
</code></pre>
<p>Then, you&apos;ll need to register your modules and commands to the bot, and create the client.<br>Example (with command classes):</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const SomeCommand = require(&apos;./commands/general/some-command&apos;);
const SomeOtherCommand = require(&apos;./commands/general/some-other-command&apos;);
const YetAnotherCommand = require(&apos;./commands/some-mod/another-command&apos;);

const client = bot
    .registerDefaults()
    .registerModules([
        [&apos;general&apos;, &apos;General&apos;],
        [&apos;something&apos;, &apos;Some module&apos;]
    ])
    .registerCommands([
        SomeCommand,
        SomeOtherCommand,
        YetAnotherCommand
    ])
.createClient();</code>
</code></pre>
<p>That&apos;s it!
You now have a fully-functioning bot.</p>
<h2 id="commands">Commands</h2>
<p>There are two ways to make a command; using the command builder, or making your own class.
Using classes is generally preferred and cleaner.
Regardless of the method used to make your command, you will need an object of command information.
At minimum, the command info must contain the <code>name</code>, <code>module</code>, <code>memberName</code>, and <code>description</code> properties.
See the <a href="./manual/../typedef/index.html#static-typedef-CommandInfo">list of all command options</a>.
If a command name or alias has hyphens (<code>-</code>) in it, the framework will automatically add aliases for de-hyphenated ones.</p>
<h3 id="classes">Classes</h3>
<p>All commands extend the base <a href="./manual/../class/src/commands/command.js~Command.html"><code>Command</code></a> class.
They must all override the <a href="./manual/../class/src/commands/command.js~Command.html#instance-constructor-constructor">constructor</a>
and <a href="./manual/../class/src/commands/command.js~Command.html#instance-method-run"><code>run</code></a> method.
They may also optionally override the <a href="./manual/../class/src/commands/command.js~Command.html#instance-method-hasPermission"><code>hasPermission</code></a> method.</p>
<p>Example command:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const graf = require(&apos;discord-graf&apos;);

module.exports = class AddNumbersCommand extends graf.Command {
    constructor(bot) {
        super(bot, {
            name: &apos;add-numbers&apos;,
            aliases: [&apos;add&apos;, &apos;add-nums&apos;],
            module: &apos;math&apos;,
            memberName: &apos;add&apos;,
            description: &apos;Adds numbers together.&apos;,
            usage: &apos;add-numbers &lt;number&gt; [number2] [number3...]&apos;,
            details: &apos;This is an incredibly useful command that finds the sum of numbers. This command is the envy of all other commands.&apos;,
            examples: [&apos;add-numbers 42 1337&apos;],
            argsType: &apos;multiple&apos;
        });
    }

    run(message, args) {
        if(!args[0]) throw new graf.CommandFormatError(this, message.guild);
        const total = args.reduce((prev, arg) =&gt; prev + parseFloat(arg), 0);
        return Promise.resolve(`Sum: ${total}`);
    }
}</code>
</code></pre>
<h3 id="builder">Builder</h3>
<p>The command builder allows you to make and register commands with the bot with a fluent interface.</p>
<p>To use the builder, just call <a href="./manual/../class/src/bot/index.js~Bot.html#instance-method-buildCommand"><code>bot.buildCommand()</code></a> to get a builder.
Call <a href="./manual/../class/src/commands/builder.js~CommandBuilder.html#instance-method-info"><code>.info()</code></a> on the builder to set the command information before anything else.
Call <a href="./manual/../class/src/commands/builder.js~CommandBuilder.html#instance-method-run"><code>.run()</code></a> to set the command&apos;s
<a href="./manual/../class/src/commands/command.js~Command.html#instance-method-run"><code>run</code></a> method.
Optionally call <a href="./manual/../class/src/commands/builder.js~CommandBuilder.html#instance-method-hasPermission"><code>.hasPermission()</code></a> to set the command&apos;s
<a href="./manual/../class/src/commands/command.js~Command.html#instance-method-hasPermission"><code>hasPermission</code></a> method.
Note that using arrow functions will not allow you to access the command via <code>this</code>, so use regular functions instead.
Finally, call <a href="./manual/../class/src/commands/builder.js~CommandBuilder.html#instance-method-register"><code>.register()</code></a> to register the command to the bot.</p>
<p>Example command:</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const graf = require(&apos;discord-graf&apos;);

bot.buildCommand()
    .info({
        name: &apos;add-numbers&apos;,
        aliases: [&apos;add&apos;, &apos;add-nums&apos;],
        module: &apos;math&apos;,
        memberName: &apos;add&apos;,
        description: &apos;Adds numbers together.&apos;,
        usage: &apos;add-numbers &lt;number&gt; [number2] [number3...]&apos;,
        details: &apos;This is an incredibly useful command that finds the sum of numbers. This command is the envy of all other commands.&apos;,
        examples: [&apos;add-numbers 42 1337&apos;],
        argsType: &apos;multiple&apos;
    })
    .run(function run(message, args) {
        if(!args[0]) throw new graf.CommandFormatError(this, message.guild);
        const total = args.reduce((prev, arg) =&gt; prev + parseFloat(arg), 0);
        return Promise.resolve(`Sum: ${total}`);
    })
.register();</code>
</code></pre>
<h2 id="permissions">Permissions</h2>
<p>Every bot has an instance of <a href="./manual/../class/src/bot/permissions.js~BotPermissions.html"><code>BotPermissions</code></a> as <code>bot.permissions</code> that contains handy methods for checking the permissions of a user on a server.
There are three permissions:</p>
<ul>
<li>Owner (<a href="./manual/../class/src/bot/permissions.js~BotPermissions.html#instance-method-isOwner"><code>isOwner</code></a>):
Only the owner of the bot has this permission, and they have it in every server.</li>
<li>Administrator (<a href="./manual/../class/src/bot/permissions.js~BotPermissions.html#instance-method-isAdmin"><code>isAdmin</code></a>):
A user has this permission if they are the bot owner, or if they have a role on the server with the &quot;Administrate&quot; permission.</li>
<li>Moderator (<a href="./manual/../class/src/bot/permissions.js~BotPermissions.html#instance-method-isMod"><code>isMod</code></a>):
A user has this permission if they are the bot owner, they are an admin, or they have one of the moderator roles assigned.
If there are no moderator roles set in the server, then the &quot;Manage messages&quot; permission on any of their roles will make them a moderator instead.</li>
</ul>
<h2 id="guild-storage">Guild storage</h2>
<p>The <a href="./manual/../class/src/storage/index.js~GuildStorage.html"><code>GuildStorage</code></a> class allows you to create storages that associate data with guilds.
You can either directly instantiate the base <code>GuildStorage</code> class, or extend it.
There are three built-in storages that every bot has an instance of:</p>
<ul>
<li><a href="./manual/../class/src/storage/allowed-channels.js~AllowedChannelStorage.html"><code>AllowedChannelStorage</code></a> as <code>bot.storage.allowedChannels</code></li>
<li><a href="./manual/../class/src/storage/mod-roles.js~ModRoleStorage.html"><code>ModRoleStorage</code></a> as <code>bot.storage.modRoles</code></li>
<li><a href="./manual/../class/src/storage/settings.js~SettingStorage.html"><code>SettingStorage</code></a> as <code>bot.storage.settings</code></li>
</ul>
<p>You probably will never need to use the first two, as they are used primarily by built-in commands/functionality.
The <code>SettingStorage</code>, however, could prove to be very useful for your bot.
It&apos;s essentially a key-value store that is associated with guilds, so you can store simple per-guild settings with it.</p>
<p>It is not recommended to use the storages to store large amounts of data or user-generated content.
Use <a href="https://www.npmjs.com/package/sqlite">SQLite</a> or some other database for that.</p>
<h2 id="utilities">Utilities</h2>
<p>Every bot has an instance of <a href="./manual/../class/src/bot/util.js~BotUtil.html"><code>BotUtil</code></a> as <code>bot.util</code>.
This contains several handy methods:</p>
<ul>
<li><a href="./manual/../class/src/bot/util.js~BotUtil.html#instance-method-usage"><code>usage</code></a> creates command usage strings to send in messages</li>
<li><a href="./manual/../class/src/bot/util.js~BotUtil.html#instance-method-nbsp"><code>nbsp</code></a> converts all spaces in a string into non-breaking spaces</li>
<li><a href="./manual/../class/src/bot/util.js~BotUtil.html#instance-method-disambiguation"><code>disambiguation</code></a> creates disambiguation strings to send in messages
(for when you find multiple matches from user input, and need a specific one)</li>
<li><a href="./manual/../class/src/bot/util.js~BotUtil.html#instance-method-paginate"><code>paginate</code></a> paginates an array of items, and returns info about the pagination</li>
<li><a href="./manual/../class/src/bot/util.js~BotUtil.html#instance-method-search"><code>search</code></a> searches an array of items and finds matches</li>
<li><a href="./manual/../class/src/bot/util.js~BotUtil.html#instance-method-split"><code>split</code></a> splits a string into multiple strings that will fit within Discord&apos;s 2,000 character limit</li>
</ul>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
